<!doctype html>
<html lang="id"> 
 <head> 
  <meta charset="UTF-8"> 
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
  <title>Panel Admin OSIM</title> 
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&amp;display=swap" rel="stylesheet"> 
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"> 
  
  <style>
    /* STYLE CSS TETAP UTUH */
    :root {
      --bg-color: #F0F4F8;
      --text-color: #0F172A;
      --accent-color: #1E40AF;
      --secondary-bg: #FFFFFF;
      --danger-color: #DC2626;
      --success-color: #059669;
      --warning-color: #F59E0B;
      --info-color: #3B82F6;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Plus Jakarta Sans', sans-serif;
    }

    body {
      background-color: var(--bg-color);
      color: var(--text-color);
    }

    /* LOGIN PAGE */
    .login-container {
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      padding: 20px;
    }

    .login-box {
      background: var(--secondary-bg);
      padding: 40px;
      border-radius: 15px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
      width: 100%;
      max-width: 400px;
    }

    .login-logo {
      text-align: center;
      margin-bottom: 30px;
    }

    .login-logo h1 {
      font-size: 1.8rem;
      font-weight: 800;
      color: var(--accent-color);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
    }

    .form-control {
      width: 100%;
      padding: 12px 15px;
      border: 1px solid rgba(30, 64, 175, 0.2);
      border-radius: 8px;
      font-size: 1rem;
      transition: all 0.3s;
    }

    .form-control:focus {
      outline: none;
      border-color: var(--accent-color);
      box-shadow: 0 0 0 3px rgba(30, 64, 175, 0.1);
    }

    .btn {
      padding: 12px 25px;
      border: none;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      font-size: 0.95rem;
    }

    .btn-primary {
      background: var(--accent-color);
      color: white;
      width: 100%;
      justify-content: center;
    }

    .btn-primary:hover {
      background: #1D4ED8;
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(30, 64, 175, 0.3);
    }

    .btn-danger {
      background: var(--danger-color);
      color: white;
    }

    .btn-success {
      background: var(--success-color);
      color: white;
    }

    .btn-warning {
      background: var(--warning-color);
      color: white;
    }

    .btn-info {
      background: var(--info-color);
      color: white;
    }

    .btn-outline {
      background: transparent;
      border: 2px solid var(--accent-color);
      color: var(--accent-color);
    }

    /* ADMIN LAYOUT */
    .admin-container {
      display: flex;
      min-height: 100vh;
    }

    .sidebar {
      width: 250px;
      background: var(--secondary-bg);
      border-right: 1px solid rgba(30, 64, 175, 0.1);
      padding: 20px 0;
      position: fixed;
      height: 100vh;
      overflow-y: auto;
    }

    .admin-logo {
      padding: 0 25px 30px;
      border-bottom: 1px solid rgba(30, 64, 175, 0.1);
      margin-bottom: 20px;
    }

    .admin-logo h1 {
      font-size: 1.4rem;
      font-weight: 800;
      display: flex;
      align-items: center;
      gap: 10px;
      color: var(--accent-color);
    }

    .admin-menu {
      list-style: none;
    }

    .menu-item {
      padding: 15px 25px;
      display: flex;
      align-items: center;
      gap: 12px;
      text-decoration: none;
      color: var(--text-color);
      transition: all 0.3s;
      border-left: 3px solid transparent;
      cursor: pointer;
    }

    .menu-item:hover,
    .menu-item.active {
      background: rgba(30, 64, 175, 0.1);
      border-left: 3px solid var(--accent-color);
      color: var(--accent-color);
    }

    .menu-item i {
      width: 20px;
      text-align: center;
    }

    .main-content {
      flex: 1;
      margin-left: 250px;
      padding: 30px;
      overflow-y: auto;
      max-height: 100vh;
    }

    .admin-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 30px;
    }

    .page-title {
      font-size: 1.8rem;
      font-weight: 800;
      color: var(--accent-color);
    }

    .logout-btn {
      background: var(--danger-color);
      color: white;
      padding: 8px 15px;
      border-radius: 5px;
      text-decoration: none;
      display: flex;
      align-items: center;
      gap: 5px;
      font-size: 0.9rem;
    }

    .admin-section {
      background: var(--secondary-bg);
      border-radius: 15px;
      padding: 30px;
      margin-bottom: 30px;
      border: 1px solid rgba(30, 64, 175, 0.1);
    }

    .section-title {
      font-size: 1.3rem;
      font-weight: 800;
      margin-bottom: 25px;
      color: var(--accent-color);
      display: flex;
      align-items: center;
      gap: 10px;
    }

    /* FORM LAYOUT */
    .form-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
    }

    /* PENGUMUMAN STYLES */
    .announcement-card {
      background: var(--secondary-bg);
      border-radius: 15px;
      padding: 25px;
      margin-bottom: 20px;
      border: 1px solid rgba(30, 64, 175, 0.1);
      transition: transform 0.3s, box-shadow 0.3s;
    }

    .announcement-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }

    .announcement-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }

    .announcement-badge {
      padding: 5px 12px;
      border-radius: 20px;
      font-size: 0.8rem;
      font-weight: 600;
      color: white;
    }

    .announcement-date {
      font-size: 0.9rem;
      opacity: 0.7;
    }

    .announcement-title {
      font-size: 1.3rem;
      font-weight: 600;
      margin-bottom: 15px;
      color: var(--text-color);
    }

    .announcement-content {
      opacity: 0.8;
      line-height: 1.6;
      margin-bottom: 20px;
    }

    /* PROKER STYLES */
    .proker-card {
      background: var(--secondary-bg);
      border-radius: 15px;
      padding: 25px;
      margin-bottom: 20px;
      border: 1px solid rgba(30, 64, 175, 0.1);
      border-left: 5px solid var(--success-color);
    }

    .proker-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }

    .proker-title {
      font-size: 1.3rem;
      font-weight: 600;
      margin-bottom: 10px;
      color: var(--text-color);
    }

    .proker-desc {
      opacity: 0.8;
      line-height: 1.6;
      margin-bottom: 15px;
    }

    .proker-progress {
      height: 8px;
      background: rgba(30, 64, 175, 0.1);
      border-radius: 4px;
      margin: 15px 0;
      overflow: hidden;
    }

    .proker-progress-bar {
      height: 100%;
      background: var(--success-color);
      border-radius: 4px;
      transition: width 0.3s;
    }

    /* KEGIATAN STYLES */
    .kegiatan-card {
      background: var(--secondary-bg);
      border-radius: 15px;
      padding: 20px;
      margin-bottom: 15px;
      border: 1px solid rgba(30, 64, 175, 0.1);
      border-left: 5px solid var(--info-color);
    }

    .kegiatan-date {
      font-size: 0.9rem;
      color: var(--info-color);
      font-weight: 600;
      margin-bottom: 10px;
    }

    .kegiatan-title {
      font-size: 1.2rem;
      font-weight: 600;
      margin-bottom: 10px;
      color: var(--text-color);
    }

    /* GALERI STYLES */
    .gallery-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }

    .gallery-item {
      aspect-ratio: 4/3;
      background: rgba(30, 64, 175, 0.1);
      border-radius: 12px;
      overflow: hidden;
      position: relative;
      cursor: pointer;
      transition: transform 0.3s;
    }

    .gallery-item:hover {
      transform: scale(1.05);
    }

    .gallery-img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .gallery-overlay {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      background: linear-gradient(transparent, rgba(0,0,0,0.8));
      color: white;
      padding: 15px;
      transform: translateY(100%);
      transition: transform 0.3s;
    }

    .gallery-item:hover .gallery-overlay {
      transform: translateY(0);
    }

    /* PROFIL STYLES */
    .profil-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }

    .profil-card {
      background: var(--secondary-bg);
      border-radius: 15px;
      padding: 25px;
      border: 1px solid rgba(30, 64, 175, 0.1);
      text-align: center;
      transition: transform 0.3s;
    }

    .profil-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 20px rgba(0,0,0,0.1);
    }

    .profil-avatar {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      background: rgba(30, 64, 175, 0.2);
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--accent-color);
      font-size: 2.5rem;
      margin: 0 auto 20px;
      overflow: hidden;
    }

    .profil-avatar img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .profil-name {
      font-size: 1.3rem;
      font-weight: 600;
      margin-bottom: 5px;
      color: var(--text-color);
    }

    .profil-jabatan {
      color: var(--accent-color);
      font-weight: 600;
      margin-bottom: 10px;
    }

    /* DASHBOARD STATS */
    .dashboard-stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }
    
    .stat-card {
      background: var(--secondary-bg);
      border-radius: 15px;
      padding: 25px;
      border: 1px solid rgba(30, 64, 175, 0.1);
      transition: all 0.3s;
    }
    
    .stat-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 20px rgba(0,0,0,0.1);
    }
    
    .stat-value {
      font-size: 2.5rem;
      font-weight: 800;
      color: var(--accent-color);
      margin: 10px 0;
    }
    
    .stat-label {
      font-size: 0.9rem;
      opacity: 0.8;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    /* FORM VALIDATION */
    .error-message {
      color: var(--danger-color);
      font-size: 0.85rem;
      margin-top: 5px;
      display: none;
    }
    
    .form-control.error {
      border-color: var(--danger-color);
      background: rgba(220, 38, 38, 0.05);
    }

    /* STATUS BADGES */
    .status-badge {
      padding: 5px 12px;
      border-radius: 20px;
      font-size: 0.8rem;
      font-weight: 600;
      color: white;
      display: inline-block;
    }
    
    .status-draft {
      background: #6B7280;
    }
    
    .status-published {
      background: var(--success-color);
    }

    .status-ongoing {
      background: var(--warning-color);
    }

    .status-completed {
      background: var(--success-color);
    }

    /* SEARCH BAR */
    .search-container {
      position: relative;
      margin-bottom: 20px;
    }
    
    .search-input {
      width: 100%;
      padding: 12px 15px 12px 45px;
      border: 1px solid rgba(30, 64, 175, 0.2);
      border-radius: 8px;
      font-size: 1rem;
    }
    
    .search-icon {
      position: absolute;
      left: 15px;
      top: 50%;
      transform: translateY(-50%);
      color: var(--accent-color);
    }

    /* UPLOAD AREA */
    .upload-area {
      border: 2px dashed rgba(30, 64, 175, 0.3);
      border-radius: 10px;
      padding: 30px;
      text-align: center;
      cursor: pointer;
      margin-bottom: 15px;
      transition: all 0.3s;
    }
    
    .upload-area:hover {
      border-color: var(--accent-color);
      background: rgba(30, 64, 175, 0.05);
    }

    /* ALERT */
    .alert {
      padding: 15px 20px;
      border-radius: 8px;
      margin-bottom: 20px;
      display: none;
      animation: slideIn 0.3s ease;
    }

    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(-10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .alert-success {
      background: rgba(5, 150, 105, 0.1);
      border: 1px solid var(--success-color);
      color: var(--success-color);
    }

    .alert-error {
      background: rgba(220, 38, 38, 0.1);
      border: 1px solid var(--danger-color);
      color: var(--danger-color);
    }

    /* BUTTON GROUP */
    .btn-group {
      display: flex;
      gap: 10px;
      margin-top: 20px;
      justify-content: flex-end;
    }

    /* LOADING */
    .loading {
      text-align: center;
      padding: 40px;
      opacity: 0.7;
    }

    .loading i {
      font-size: 2rem;
      margin-bottom: 15px;
      color: var(--accent-color);
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    /* TABLE */
    .data-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }

    .data-table th {
      background: rgba(30, 64, 175, 0.1);
      padding: 15px;
      text-align: left;
      font-weight: 600;
      color: var(--accent-color);
      border-bottom: 2px solid rgba(30, 64, 175, 0.2);
    }

    .data-table td {
      padding: 15px;
      border-bottom: 1px solid rgba(30, 64, 175, 0.1);
    }

    .action-btns {
      display: flex;
      gap: 8px;
    }

    /* TABS */
    .tabs {
      display: flex;
      border-bottom: 2px solid rgba(30, 64, 175, 0.1);
      margin-bottom: 20px;
    }

    .tab {
      padding: 12px 24px;
      cursor: pointer;
      font-weight: 600;
      color: var(--text-color);
      opacity: 0.7;
      border-bottom: 3px solid transparent;
      transition: all 0.3s;
    }

    .tab:hover {
      opacity: 1;
    }

    .tab.active {
      color: var(--accent-color);
      opacity: 1;
      border-bottom: 3px solid var(--accent-color);
    }

    .tab-content {
      display: none;
    }

    .tab-content.active {
      display: block;
    }

    /* RESPONSIVE */
    @media (max-width: 768px) {
      .sidebar {
        width: 100%;
        position: relative;
        height: auto;
      }
      .main-content {
        margin-left: 0;
      }
      .admin-container {
        flex-direction: column;
      }
      .form-grid {
        grid-template-columns: 1fr;
      }
      .btn-group {
        flex-direction: column;
      }
    }
  </style> 
 </head> 
 <body> 

  <div id="login-page" class="login-container"> 
   <div class="login-box"> 
    <div class="login-logo"> 
     <h1><i class="fas fa-shield-alt"></i> Login Admin OSIM</h1> 
    </div> 
    <div class="form-group"> 
      <label class="form-label">Username</label> 
      <input type="text" class="form-control" id="username" placeholder="Masukkan username" value="admin"> 
    </div> 
    <div class="form-group"> 
      <label class="form-label">Password</label> 
      <input type="password" class="form-control" id="password" placeholder="Masukkan password" value="admin123"> 
    </div> 
    <button class="btn btn-primary" id="login-btn"> 
      <i class="fas fa-sign-in-alt"></i> Login 
    </button> 
    <div style="text-align: center; margin-top: 20px; font-size: 0.9rem; opacity: 0.7;"> 
     <p>Default: admin / admin123</p> 
    </div> 
   </div> 
  </div> 

  <div id="admin-dashboard" class="admin-container" style="display: none;"> 
   <div class="sidebar"> 
    <div class="admin-logo"> 
     <h1><i class="fas fa-shield-alt"></i> Panel Admin OSIM</h1> 
    </div> 
    <ul class="admin-menu"> 
     <li><div class="menu-item active" data-section="dashboard"><i class="fas fa-chart-line"></i> Dashboard</div></li> 
     <li><div class="menu-item" data-section="pengumuman"><i class="fas fa-bullhorn"></i> Pengumuman</div></li> 
     <li><div class="menu-item" data-section="proker"><i class="fas fa-tasks"></i> Program Kerja</div></li> 
     <li><div class="menu-item" data-section="kegiatan"><i class="fas fa-calendar-alt"></i> Kegiatan</div></li> 
     <li><div class="menu-item" data-section="galeri"><i class="fas fa-images"></i> Galeri</div></li> 
     <li><div class="menu-item" data-section="profil"><i class="fas fa-users"></i> Profil Pengurus</div></li> 
     <li><div class="menu-item" data-section="settings"><i class="fas fa-cog"></i> Pengaturan</div></li> 
    </ul> 
    <div style="padding: 20px; border-top: 1px solid rgba(30, 64, 175, 0.1); margin-top: auto;"> 
     <div style="font-size: 0.8rem; opacity: 0.7; margin-bottom: 5px;"> 
       <i class="fas fa-user-circle"></i> <span id="current-user">Admin</span> 
     </div> 
     <div style="font-size: 0.7rem; opacity: 0.5;" id="last-login">Last login: -</div> 
    </div> 
   </div> 

   <div class="main-content"> 
    <div class="admin-header"> 
     <h1 class="page-title" id="page-title">Dashboard</h1> 
     <a href="#" class="logout-btn" id="logout-btn"> 
       <i class="fas fa-sign-out-alt"></i> Logout 
     </a> 
    </div> 
    
    <!-- Alert Container -->
    <div class="alert" id="admin-alert"></div> 

    <!-- DASHBOARD SECTION -->
    <div id="dashboard-section" class="admin-section"> 
     <h2 class="section-title"><i class="fas fa-chart-bar"></i> Ringkasan Statistik</h2> 
     <div class="dashboard-stats"> 
      <div class="stat-card"> 
       <div class="stat-label"><i class="fas fa-bullhorn" style="color: #1E40AF;"></i> Total Pengumuman</div> 
       <div class="stat-value" id="stat-pengumuman">0</div> 
       <div class="stat-label">Published: <span id="stat-published">0</span></div> 
      </div> 
      <div class="stat-card"> 
       <div class="stat-label"><i class="fas fa-tasks" style="color: #059669;"></i> Program Aktif</div> 
       <div class="stat-value" id="stat-proker">0</div> 
       <div class="stat-label">Selesai: <span id="stat-proker-selesai">0</span></div> 
      </div> 
      <div class="stat-card"> 
       <div class="stat-label"><i class="fas fa-calendar" style="color: #7C3AED;"></i> Kegiatan Mendatang</div> 
       <div class="stat-value" id="stat-kegiatan">0</div> 
       <div class="stat-label">7 hari ke depan</div> 
      </div> 
      <div class="stat-card"> 
       <div class="stat-label"><i class="fas fa-images" style="color: #DC2626;"></i> Total Foto</div> 
       <div class="stat-value" id="stat-foto">0</div> 
       <div class="stat-label">Pengurus: <span id="stat-pengurus">0</span></div> 
      </div> 
     </div>
     <div style="margin-top: 30px;">
       <h3 class="section-title"><i class="fas fa-bolt"></i> Quick Actions</h3>
       <div style="display: flex; gap: 15px; flex-wrap: wrap;">
         <button class="btn btn-primary" id="quick-add-pengumuman">
           <i class="fas fa-plus"></i> Tambah Pengumuman
         </button>
         <button class="btn btn-success" id="quick-add-proker">
           <i class="fas fa-tasks"></i> Tambah Program Kerja
         </button>
         <button class="btn btn-info" id="quick-add-kegiatan">
           <i class="fas fa-calendar-plus"></i> Tambah Kegiatan
         </button>
         <button class="btn btn-warning" id="create-all-dummy">
           <i class="fas fa-database"></i> Generate Data Contoh
         </button>
       </div>
     </div>
    </div> 

    <!-- PENGUMUMAN SECTION -->
    <div id="pengumuman-section" class="admin-section" style="display: none;">
      <div class="tabs">
        <div class="tab active" data-tab="form-pengumuman">Tambah Pengumuman</div>
        <div class="tab" data-tab="list-pengumuman">Daftar Pengumuman</div>
      </div>
      
      <div class="tab-content active" id="form-pengumuman">
        <h2 class="section-title"><i class="fas fa-plus-circle"></i> Tambah Pengumuman Baru</h2> 
        <input type="hidden" id="edit-pengumuman-id"> 
        <div class="form-grid"> 
          <div class="form-group"> 
            <label class="form-label">Judul Pengumuman</label> 
            <input type="text" class="form-control" id="pengumuman-judul" placeholder="Masukkan judul"> 
          </div> 
          <div class="form-group"> 
            <label class="form-label">Jenis Pengumuman</label> 
            <select class="form-control" id="pengumuman-jenis"> 
              <option value="Penting">Penting</option> 
              <option value="Info">Info</option> 
              <option value="Darurat">Darurat</option> 
              <option value="Acara">Acara</option> 
              <option value="Lomba">Lomba</option>
              <option value="Pengumuman">Pengumuman</option>
            </select> 
          </div> 
          <div class="form-group"> 
            <label class="form-label">Tanggal</label> 
            <input type="date" class="form-control" id="pengumuman-tanggal"> 
          </div> 
          <div class="form-group"> 
            <label class="form-label">Status</label> 
            <select class="form-control" id="pengumuman-status"> 
              <option value="published">Published</option> 
              <option value="draft">Draft</option> 
            </select> 
          </div> 
        </div> 
        <div class="form-group"> 
         <label class="form-label">Isi Pengumuman</label> 
         <textarea class="form-control" id="pengumuman-isi" rows="5" placeholder="Tulis isi pengumuman..."></textarea> 
         <div style="text-align: right; margin-top: 5px;"> 
           <small style="opacity: 0.7;" id="char-count">0 karakter</small> 
         </div> 
        </div> 
        <div class="form-group"> 
         <label class="form-label">Lampiran (opsional)</label> 
         <div style="display: flex; gap: 10px;"> 
          <input type="text" class="form-control" id="pengumuman-lampiran" placeholder="Link/file"> 
          <button type="button" class="btn btn-outline" id="upload-trigger"> 
            <i class="fas fa-upload"></i> Upload 
          </button> 
         </div> 
         <input type="file" id="file-upload" style="display: none;"> 
        </div> 
        <div class="btn-group"> 
         <button class="btn btn-primary" id="simpan-pengumuman"> 
           <i class="fas fa-save"></i> Simpan Pengumuman 
         </button> 
         <button class="btn btn-outline" id="reset-pengumuman"> 
           <i class="fas fa-redo"></i> Reset 
         </button> 
         <button class="btn btn-danger" id="cancel-edit" style="display: none;"> 
           <i class="fas fa-times"></i> Batal Edit 
         </button> 
        </div> 
      </div>
      
      <div class="tab-content" id="list-pengumuman">
        <h2 class="section-title"><i class="fas fa-list"></i> Daftar Pengumuman</h2> 
        <div class="search-container"> 
          <i class="fas fa-search search-icon"></i> 
          <input type="text" class="search-input" id="search-pengumuman" placeholder="Cari pengumuman..."> 
        </div> 
        <div id="daftar-pengumuman" class="loading">
          <i class="fas fa-spinner"></i>
          <p>Memuat data...</p>
        </div>
      </div>
    </div>

    <!-- PROKER SECTION -->
    <div id="proker-section" class="admin-section" style="display: none;">
      <div class="tabs">
        <div class="tab active" data-tab="form-proker">Tambah Program Kerja</div>
        <div class="tab" data-tab="list-proker">Daftar Program Kerja</div>
      </div>
      
      <div class="tab-content active" id="form-proker">
        <h2 class="section-title"><i class="fas fa-plus-circle"></i> Tambah Program Kerja</h2>
        <input type="hidden" id="edit-proker-id">
        <div class="form-grid">
          <div class="form-group">
            <label class="form-label">Nama Program</label>
            <input type="text" class="form-control" id="proker-nama" placeholder="Nama program kerja">
          </div>
          <div class="form-group">
            <label class="form-label">Divisi</label>
            <select class="form-control" id="proker-divisi">
              <option value="Acara">Acara</option>
              <option value="Humas">Humas</option>
              <option value="Kesenian">Kesenian</option>
              <option value="Olahraga">Olahraga</option>
              <option value="Paskibra">Paskibra</option>
              <option value="Pramuka">Pramuka</option>
              <option value="Rohis">Rohis</option>
              <option value="Sekretariat">Sekretariat</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">Tanggal Mulai</label>
            <input type="date" class="form-control" id="proker-mulai">
          </div>
          <div class="form-group">
            <label class="form-label">Tanggal Selesai</label>
            <input type="date" class="form-control" id="proker-selesai">
          </div>
          <div class="form-group">
            <label class="form-label">Status</label>
            <select class="form-control" id="proker-status">
              <option value="ongoing">Berjalan</option>
              <option value="completed">Selesai</option>
              <option value="planned">Direncanakan</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">Progress (%)</label>
            <input type="range" class="form-control" id="proker-progress" min="0" max="100" value="0">
            <div style="text-align: center; margin-top: 5px;">
              <span id="progress-value">0%</span>
            </div>
          </div>
        </div>
        <div class="form-group">
          <label class="form-label">Deskripsi Program</label>
          <textarea class="form-control" id="proker-deskripsi" rows="4" placeholder="Deskripsi program kerja"></textarea>
        </div>
        <div class="form-group">
          <label class="form-label">Penanggung Jawab</label>
          <input type="text" class="form-control" id="proker-pj" placeholder="Nama penanggung jawab">
        </div>
        <div class="btn-group">
          <button class="btn btn-success" id="simpan-proker">
            <i class="fas fa-save"></i> Simpan Program
          </button>
          <button class="btn btn-outline" id="reset-proker">
            <i class="fas fa-redo"></i> Reset
          </button>
        </div>
      </div>
      
      <div class="tab-content" id="list-proker">
        <h2 class="section-title"><i class="fas fa-list"></i> Daftar Program Kerja</h2>
        <div class="search-container">
          <i class="fas fa-search search-icon"></i>
          <input type="text" class="search-input" id="search-proker" placeholder="Cari program kerja...">
        </div>
        <div id="daftar-proker" class="loading">
          <i class="fas fa-spinner"></i>
          <p>Memuat data...</p>
        </div>
      </div>
    </div>

    <!-- KEGIATAN SECTION -->
    <div id="kegiatan-section" class="admin-section" style="display: none;">
      <div class="tabs">
        <div class="tab active" data-tab="form-kegiatan">Tambah Kegiatan</div>
        <div class="tab" data-tab="list-kegiatan">Kalender Kegiatan</div>
      </div>
      
      <div class="tab-content active" id="form-kegiatan">
        <h2 class="section-title"><i class="fas fa-plus-circle"></i> Tambah Kegiatan</h2>
        <input type="hidden" id="edit-kegiatan-id">
        <div class="form-grid">
          <div class="form-group">
            <label class="form-label">Nama Kegiatan</label>
            <input type="text" class="form-control" id="kegiatan-nama" placeholder="Nama kegiatan">
          </div>
          <div class="form-group">
            <label class="form-label">Tanggal</label>
            <input type="date" class="form-control" id="kegiatan-tanggal">
          </div>
          <div class="form-group">
            <label class="form-label">Waktu</label>
            <input type="time" class="form-control" id="kegiatan-waktu">
          </div>
          <div class="form-group">
            <label class="form-label">Tempat</label>
            <input type="text" class="form-control" id="kegiatan-tempat" placeholder="Tempat/lokasi">
          </div>
          <div class="form-group">
            <label class="form-label">Jenis Kegiatan</label>
            <select class="form-control" id="kegiatan-jenis">
              <option value="Rapat">Rapat</option>
              <option value="Latihan">Latihan</option>
              <option value="Pelatihan">Pelatihan</option>
              <option value="Lomba">Lomba</option>
              <option value="Pertemuan">Pertemuan</option>
              <option value="Acara">Acara</option>
            </select>
          </div>
        </div>
        <div class="form-group">
          <label class="form-label">Deskripsi</label>
          <textarea class="form-control" id="kegiatan-deskripsi" rows="3" placeholder="Deskripsi kegiatan"></textarea>
        </div>
        <div class="form-group">
          <label class="form-label">Peserta</label>
          <input type="text" class="form-control" id="kegiatan-peserta" placeholder="Peserta kegiatan">
        </div>
        <div class="btn-group">
          <button class="btn btn-info" id="simpan-kegiatan">
            <i class="fas fa-save"></i> Simpan Kegiatan
          </button>
          <button class="btn btn-outline" id="reset-kegiatan">
            <i class="fas fa-redo"></i> Reset
          </button>
        </div>
      </div>
      
      <div class="tab-content" id="list-kegiatan">
        <h2 class="section-title"><i class="fas fa-calendar-alt"></i> Kalender Kegiatan</h2>
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
          <button class="btn btn-outline" id="prev-month">
            <i class="fas fa-chevron-left"></i> Bulan Sebelumnya
          </button>
          <h3 id="current-month" style="font-weight: 600; color: var(--accent-color);"></h3>
          <button class="btn btn-outline" id="next-month">
            Bulan Berikutnya <i class="fas fa-chevron-right"></i>
          </button>
        </div>
        <div id="calendar-view" class="loading">
          <i class="fas fa-spinner"></i>
          <p>Memuat kalender...</p>
        </div>
      </div>
    </div>

    <!-- GALERI SECTION -->
    <div id="galeri-section" class="admin-section" style="display: none;">
      <div class="tabs">
        <div class="tab active" data-tab="form-galeri">Tambah Foto</div>
        <div class="tab" data-tab="list-galeri">Album Galeri</div>
      </div>
      
      <div class="tab-content active" id="form-galeri">
        <h2 class="section-title"><i class="fas fa-plus-circle"></i> Tambah Foto ke Galeri</h2>
        <div class="form-grid">
          <div class="form-group">
            <label class="form-label">Judul Foto</label>
            <input type="text" class="form-control" id="galeri-judul" placeholder="Judul foto">
          </div>
          <div class="form-group">
            <label class="form-label">Album</label>
            <select class="form-control" id="galeri-album">
              <option value="Kegiatan">Kegiatan</option>
              <option value="Rapat">Rapat</option>
              <option value="Pelatihan">Pelatihan</option>
              <option value="Lomba">Lomba</option>
              <option value="Pengurus">Pengurus</option>
              <option value="Acara">Acara</option>
              <option value="Lainnya">Lainnya</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">Tanggal</label>
            <input type="date" class="form-control" id="galeri-tanggal">
          </div>
        </div>
        <div class="form-group">
          <label class="form-label">Deskripsi</label>
          <textarea class="form-control" id="galeri-deskripsi" rows="3" placeholder="Deskripsi foto"></textarea>
        </div>
        <div class="form-group">
          <label class="form-label">Upload Foto</label>
          <div class="upload-area" id="galeri-upload-area">
            <i class="fas fa-cloud-upload-alt" style="font-size: 48px; color: var(--accent-color); margin-bottom: 15px;"></i>
            <p>Klik atau drag &amp; drop foto di sini</p>
            <p style="font-size: 0.9rem; opacity: 0.7;">Format: JPG, PNG, GIF (Maks: 5MB)</p>
          </div>
          <input type="file" id="galeri-file" accept="image/*" style="display: none;">
          <div id="preview-container" style="display: none; margin-top: 15px;">
            <img id="image-preview" src="#" alt="Preview" style="max-width: 200px; border-radius: 8px;">
          </div>
        </div>
        <div class="btn-group">
          <button class="btn btn-warning" id="simpan-galeri">
            <i class="fas fa-save"></i> Simpan Foto
          </button>
          <button class="btn btn-outline" id="reset-galeri">
            <i class="fas fa-redo"></i> Reset
          </button>
        </div>
      </div>
      
      <div class="tab-content" id="list-galeri">
        <h2 class="section-title"><i class="fas fa-images"></i> Album Galeri</h2>
        <div class="search-container">
          <i class="fas fa-search search-icon"></i>
          <input type="text" class="search-input" id="search-galeri" placeholder="Cari foto...">
        </div>
        <div style="margin-bottom: 20px;">
          <select class="form-control" id="filter-album" style="width: auto; display: inline-block;">
            <option value="">Semua Album</option>
            <option value="Kegiatan">Kegiatan</option>
            <option value="Rapat">Rapat</option>
            <option value="Pelatihan">Pelatihan</option>
            <option value="Lomba">Lomba</option>
            <option value="Pengurus">Pengurus</option>
            <option value="Acara">Acara</option>
          </select>
        </div>
        <div id="daftar-galeri" class="loading">
          <i class="fas fa-spinner"></i>
          <p>Memuat galeri...</p>
        </div>
      </div>
    </div>

    <!-- PROFIL SECTION -->
    <div id="profil-section" class="admin-section" style="display: none;">
      <div class="tabs">
        <div class="tab active" data-tab="form-profil">Tambah Pengurus</div>
        <div class="tab" data-tab="list-profil">Daftar Pengurus</div>
      </div>
      
      <div class="tab-content active" id="form-profil">
        <h2 class="section-title"><i class="fas fa-plus-circle"></i> Tambah Pengurus OSIM</h2>
        <input type="hidden" id="edit-profil-id">
        <div class="form-grid">
          <div class="form-group">
            <label class="form-label">Nama Lengkap</label>
            <input type="text" class="form-control" id="profil-nama" placeholder="Nama lengkap">
          </div>
          <div class="form-group">
            <label class="form-label">Jabatan</label>
            <select class="form-control" id="profil-jabatan">
              <option value="Ketua">Ketua</option>
              <option value="Wakil Ketua">Wakil Ketua</option>
              <option value="Sekretaris">Sekretaris</option>
              <option value="Bendahara">Bendahara</option>
              <option value="Koordinator Acara">Koordinator Acara</option>
              <option value="Koordinator Humas">Koordinator Humas</option>
              <option value="Koordinator Kesenian">Koordinator Kesenian</option>
              <option value="Anggota">Anggota</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">Kelas</label>
            <input type="text" class="form-control" id="profil-kelas" placeholder="Contoh: X IPA 1">
          </div>
          <div class="form-group">
            <label class="form-label">Divisi</label>
            <select class="form-control" id="profil-divisi">
              <option value="Acara">Acara</option>
              <option value="Humas">Humas</option>
              <option value="Kesenian">Kesenian</option>
              <option value="Olahraga">Olahraga</option>
              <option value="Paskibra">Paskibra</option>
              <option value="Pramuka">Pramuka</option>
              <option value="Rohis">Rohis</option>
              <option value="Sekretariat">Sekretariat</option>
              <option value="Bendahara">Bendahara</option>
            </select>
          </div>
        </div>
        <div class="form-group">
          <label class="form-label">Email</label>
          <input type="email" class="form-control" id="profil-email" placeholder="Email aktif">
        </div>
        <div class="form-group">
          <label class="form-label">No. WhatsApp</label>
          <input type="tel" class="form-control" id="profil-whatsapp" placeholder="0812-3456-7890">
        </div>
        <div class="form-group">
          <label class="form-label">Foto Profil</label>
          <div class="upload-area" id="profil-upload-area">
            <i class="fas fa-user-circle" style="font-size: 48px; color: var(--accent-color); margin-bottom: 15px;"></i>
            <p>Klik untuk upload foto profil</p>
            <p style="font-size: 0.9rem; opacity: 0.7;">Format: JPG, PNG (Maks: 2MB)</p>
          </div>
          <input type="file" id="profil-file" accept="image/*" style="display: none;">
          <div id="profil-preview" style="display: none; margin-top: 15px;">
            <img id="profil-image-preview" src="#" alt="Preview" style="width: 100px; height: 100px; border-radius: 50%; object-fit: cover;">
          </div>
        </div>
        <div class="btn-group">
          <button class="btn btn-primary" id="simpan-profil">
            <i class="fas fa-save"></i> Simpan Pengurus
          </button>
          <button class="btn btn-outline" id="reset-profil">
            <i class="fas fa-redo"></i> Reset
          </button>
        </div>
      </div>
      
      <div class="tab-content" id="list-profil">
        <h2 class="section-title"><i class="fas fa-users"></i> Daftar Pengurus OSIM</h2>
        <div class="search-container">
          <i class="fas fa-search search-icon"></i>
          <input type="text" class="search-input" id="search-profil" placeholder="Cari pengurus...">
        </div>
        <div style="margin-bottom: 20px;">
          <select class="form-control" id="filter-jabatan" style="width: auto; display: inline-block; margin-right: 10px;">
            <option value="">Semua Jabatan</option>
            <option value="Ketua">Ketua</option>
            <option value="Wakil Ketua">Wakil Ketua</option>
            <option value="Sekretaris">Sekretaris</option>
            <option value="Bendahara">Bendahara</option>
            <option value="Koordinator">Koordinator</option>
            <option value="Anggota">Anggota</option>
          </select>
          <select class="form-control" id="filter-divisi" style="width: auto; display: inline-block;">
            <option value="">Semua Divisi</option>
            <option value="Acara">Acara</option>
            <option value="Humas">Humas</option>
            <option value="Kesenian">Kesenian</option>
            <option value="Olahraga">Olahraga</option>
            <option value="Paskibra">Paskibra</option>
            <option value="Pramuka">Pramuka</option>
            <option value="Rohis">Rohis</option>
          </select>
        </div>
        <div id="daftar-profil" class="loading">
          <i class="fas fa-spinner"></i>
          <p>Memuat data pengurus...</p>
        </div>
      </div>
    </div>

    <!-- SETTINGS SECTION -->
    <div id="settings-section" class="admin-section" style="display: none;">
      <h2 class="section-title"><i class="fas fa-cog"></i> Pengaturan Sistem</h2>
      
      <div class="form-grid">
        <div class="form-group">
          <label class="form-label">Nama Organisasi</label>
          <input type="text" class="form-control" id="setting-nama" placeholder="Nama OSIM/Sekolah">
        </div>
        <div class="form-group">
          <label class="form-label">Tahun Ajaran</label>
          <input type="text" class="form-control" id="setting-tahun" placeholder="2024/2025">
        </div>
        <div class="form-group">
          <label class="form-label">Logo Organisasi (URL)</label>
          <input type="text" class="form-control" id="setting-logo" placeholder="URL logo">
        </div>
        <div class="form-group">
          <label class="form-label">Warna Tema</label>
          <input type="color" class="form-control" id="setting-warna" value="#1E40AF">
        </div>
      </div>
      
      <div class="form-group">
        <label class="form-label">Deskripsi Organisasi</label>
        <textarea class="form-control" id="setting-deskripsi" rows="4" placeholder="Deskripsi singkat OSIM"></textarea>
      </div>
      
      <h3 class="section-title" style="margin-top: 30px;"><i class="fas fa-user-shield"></i> Pengaturan Admin</h3>
      <div class="form-grid">
        <div class="form-group">
          <label class="form-label">Username Baru</label>
          <input type="text" class="form-control" id="new-username" placeholder="Username baru">
        </div>
        <div class="form-group">
          <label class="form-label">Password Baru</label>
          <input type="password" class="form-control" id="new-password" placeholder="Password baru">
        </div>
        <div class="form-group">
          <label class="form-label">Konfirmasi Password</label>
          <input type="password" class="form-control" id="confirm-password" placeholder="Ulangi password">
        </div>
      </div>
      
      <div class="btn-group">
        <button class="btn btn-success" id="save-settings">
          <i class="fas fa-save"></i> Simpan Pengaturan
        </button>
        <button class="btn btn-danger" id="reset-database">
          <i class="fas fa-trash"></i> Reset Semua Data
        </button>
      </div>
      
      <div style="margin-top: 30px; padding: 20px; background: rgba(30, 64, 175, 0.05); border-radius: 10px;">
        <h4><i class="fas fa-info-circle"></i> Informasi Sistem</h4>
        <div style="margin-top: 15px;">
          <p><strong>Versi:</strong> OSIM Admin Panel v2.0</p>
          <p><strong>Firebase Project:</strong> webosim-5c4a7</p>
          <p><strong>Total Data:</strong> <span id="total-data">0</span> item</p>
          <p><strong>Ukuran Database:</strong> <span id="db-size">0 KB</span></p>
        </div>
      </div>
    </div>

   </div> 
  </div>

  <script>
    // ==================== FIREBASE INITIALIZATION ====================
    document.addEventListener('DOMContentLoaded', function() {
      
      if (typeof firebase === 'undefined') {
        console.error('Firebase SDK tidak terload.');
        showAlert('error', 'Firebase SDK gagal di-load. Cek koneksi internet.');
        return;
      }
      
      const firebaseConfig = {
        apiKey: "AIzaSyCT7yu1D0qsW2lyK4ZMYia029nEvvMMDCs",
        authDomain: "webosim-5c4a7.firebaseapp.com",
        projectId: "webosim-5c4a7",
        storageBucket: "webosim-5c4a7.firebasestorage.app",
        messagingSenderId: "769601153494",
        appId: "1:769601153494:web:057f7f8ec7574ba486dc77",
        measurementId: "G-QEBT3N7QGL"
      };

      try {
        firebase.initializeApp(firebaseConfig);
        console.log('Firebase berhasil diinisialisasi');
      } catch (error) {
        console.error('Error inisialisasi Firebase:', error);
        showAlert('error', 'Gagal menginisialisasi Firebase');
      }

      const db = firebase.firestore();
      
      // Global Data State
      let osimData = { 
        pengumuman: [], 
        proker: [], 
        kegiatan: [], 
        galeri: [], 
        profil: [] 
      };

      // ==================== SISTEM LOGIN ====================
      async function handleLogin() {
        const username = document.getElementById('username').value;
        const password = document.getElementById('password').value;
        
        if (!username || !password) {
          showAlert('error', 'Username dan password harus diisi!');
          return;
        }
        
        if (username === 'admin' && password === 'admin123') {
          localStorage.setItem('osim_admin_logged_in', 'true');
          localStorage.setItem('osim_admin_username', 'admin');
          localStorage.setItem('osim_admin_last_login', new Date().toISOString());
          
          showAlert('success', 'Login berhasil!');
          showDashboardUI();
        } else {
          showAlert('error', 'Username/Password salah!');
        }
      }

      function showDashboardUI() {
        document.getElementById('login-page').style.display = 'none';
        document.getElementById('admin-dashboard').style.display = 'flex';
        
        const username = localStorage.getItem('osim_admin_username') || 'Admin';
        document.getElementById('current-user').textContent = username;
        
        updateLastLogin();
        loadAllData();
        
        // Set default values
        const today = new Date().toISOString().split('T')[0];
        document.getElementById('pengumuman-tanggal').value = today;
        document.getElementById('proker-mulai').value = today;
        document.getElementById('proker-selesai').value = today;
        document.getElementById('kegiatan-tanggal').value = today;
        document.getElementById('galeri-tanggal').value = today;
        
        // Set waktu default untuk kegiatan
        document.getElementById('kegiatan-waktu').value = '15:00';
        
        // Load settings
        loadSettings();
      }

      function updateLastLogin() {
        const lastLogin = localStorage.getItem('osim_admin_last_login');
        if (lastLogin) {
          const date = new Date(lastLogin);
          document.getElementById('last-login').textContent = 
            `Last login: ${date.toLocaleDateString('id-ID')} ${date.toLocaleTimeString('id-ID', { 
              hour: '2-digit', 
              minute: '2-digit' 
            })}`;
        }
      }

      // ==================== LOAD ALL DATA ====================
      async function loadAllData() {
        try {
          console.log("Loading all data from Firestore...");
          
          // Load semua koleksi secara parallel
          const collections = ['pengumuman', 'proker', 'kegiatan', 'galeri', 'profil'];
          const loadPromises = collections.map(col => 
            db.collection(col).orderBy("createdAt", "desc").get().catch(err => {
              console.log(`Collection ${col} belum ada atau error:`, err.message);
              return { empty: true };
            })
          );
          
          const results = await Promise.all(loadPromises);
          
          collections.forEach((col, index) => {
            if (!results[index].empty) {
              osimData[col] = results[index].docs.map(doc => ({ 
                id: doc.id, 
                ...doc.data() 
              }));
              console.log(`${col} loaded:`, osimData[col].length);
            } else {
              osimData[col] = [];
            }
          });
          
          // Update UI
          updateStats();
          updateSystemInfo();
          
          // Render data yang aktif
          const activeSection = document.querySelector('.menu-item.active').dataset.section;
          if (activeSection === 'dashboard') {
            // Dashboard sudah diupdate di updateStats()
          } else {
            renderSection(activeSection);
          }
          
        } catch (error) {
          console.error("Error loading all data:", error);
          showAlert('error', 'Gagal memuat data: ' + error.message);
        }
      }

      function renderSection(section) {
        switch(section) {
          case 'pengumuman':
            renderPengumuman();
            break;
          case 'proker':
            renderProker();
            break;
          case 'kegiatan':
            renderKegiatan();
            break;
          case 'galeri':
            renderGaleri();
            break;
          case 'profil':
            renderProfil();
            break;
          case 'settings':
            // Settings sudah di-load
            break;
        }
      }

      function updateStats() {
        if (!osimData.pengumuman) return;
        
        document.getElementById('stat-pengumuman').textContent = osimData.pengumuman.length;
        const publishedCount = osimData.pengumuman.filter(p => p.status === 'published').length;
        document.getElementById('stat-published').textContent = publishedCount;
        
        document.getElementById('stat-proker').textContent = osimData.proker.length;
        const completedProker = osimData.proker.filter(p => p.status === 'completed').length;
        document.getElementById('stat-proker-selesai').textContent = completedProker;
        
        // Kegiatan dalam 7 hari ke depan
        const nextWeek = new Date();
        nextWeek.setDate(nextWeek.getDate() + 7);
        const upcomingKegiatan = osimData.kegiatan.filter(k => {
          const kegiatanDate = new Date(k.tanggal);
          return kegiatanDate <= nextWeek && kegiatanDate >= new Date();
        }).length;
        document.getElementById('stat-kegiatan').textContent = upcomingKegiatan;
        
        document.getElementById('stat-foto').textContent = osimData.galeri.length;
        document.getElementById('stat-pengurus').textContent = osimData.profil.length;
      }

      function updateSystemInfo() {
        const totalData = Object.values(osimData).reduce((sum, arr) => sum + arr.length, 0);
        document.getElementById('total-data').textContent = totalData;
        
        // Estimate database size (rough calculation)
        const dataSize = JSON.stringify(osimData).length;
        document.getElementById('db-size').textContent = Math.round(dataSize / 1024) + ' KB';
      }

      // ==================== PENGUMUMAN FUNCTIONS ====================
      async function savePengumuman() {
        const id = document.getElementById('edit-pengumuman-id').value;
        const data = {
          judul: document.getElementById('pengumuman-judul').value.trim(),
          jenis: document.getElementById('pengumuman-jenis').value,
          tanggal: document.getElementById('pengumuman-tanggal').value,
          isi: document.getElementById('pengumuman-isi').value.trim(),
          status: document.getElementById('pengumuman-status').value,
          lampiran: document.getElementById('pengumuman-lampiran').value.trim(),
          createdAt: id ? firebase.firestore.FieldValue.serverTimestamp() : new Date().toISOString(),
          updatedAt: firebase.firestore.FieldValue.serverTimestamp()
        };

        if (!data.judul || !data.tanggal || !data.isi) {
          showAlert('error', 'Judul, tanggal, dan isi harus diisi!');
          return;
        }

        try {
          if (id) {
            await db.collection("pengumuman").doc(id).update(data);
            showAlert('success', 'Berhasil update pengumuman!');
          } else {
            data.createdAt = firebase.firestore.FieldValue.serverTimestamp();
            await db.collection("pengumuman").add(data);
            showAlert('success', 'Berhasil menambah pengumuman baru!');
          }
          
          clearPengumumanForm();
          loadAllData();
          
        } catch (error) {
          console.error("Error saving pengumuman:", error);
          showAlert('error', 'Gagal menyimpan: ' + error.message);
        }
      }

      function renderPengumuman() {
        const container = document.getElementById('daftar-pengumuman');
        if (!container) return;
        
        if (osimData.pengumuman.length === 0) {
          container.innerHTML = `
            <div style="text-align: center; padding: 40px; opacity: 0.7;">
              <i class="fas fa-bullhorn" style="font-size: 48px; margin-bottom: 20px;"></i>
              <p>Belum ada pengumuman</p>
              <p style="font-size: 0.9rem;">Klik "Tambah Pengumuman Baru" untuk membuat pengumuman pertama</p>
            </div>
          `;
          return;
        }
        
        container.innerHTML = osimData.pengumuman.map(p => `
          <div class="announcement-card" id="pengumuman-${p.id}">
            <div class="announcement-header">
              <span class="announcement-badge" style="background: ${getBadgeColor(p.jenis)}">${p.jenis}</span>
              <span class="announcement-date">${formatDate(p.tanggal)}</span>
              <span class="status-badge status-${p.status}">${p.status}</span>
            </div>
            <h3 class="announcement-title">${p.judul}</h3>
            <p class="announcement-content">${p.isi}</p>
            ${p.lampiran ? `
              <div style="margin-top: 10px; padding: 10px; background: rgba(30, 64, 175, 0.05); border-radius: 8px;">
                <i class="fas fa-paperclip"></i> Lampiran: ${p.lampiran}
              </div>
            ` : ''}
            <div style="margin-top: 20px; display: flex; gap: 10px; justify-content: flex-end;">
              <button class="btn btn-outline edit-pengumuman-btn" data-id="${p.id}">
                <i class="fas fa-edit"></i> Edit
              </button>
              <button class="btn btn-danger delete-pengumuman-btn" data-id="${p.id}">
                <i class="fas fa-trash"></i> Hapus
              </button>
            </div>
          </div>
        `).join('');
        
        attachPengumumanListeners();
      }

      // ==================== PROKER FUNCTIONS ====================
      async function saveProker() {
        const id = document.getElementById('edit-proker-id').value;
        const data = {
          nama: document.getElementById('proker-nama').value.trim(),
          divisi: document.getElementById('proker-divisi').value,
          mulai: document.getElementById('proker-mulai').value,
          selesai: document.getElementById('proker-selesai').value,
          status: document.getElementById('proker-status').value,
          progress: parseInt(document.getElementById('proker-progress').value),
          deskripsi: document.getElementById('proker-deskripsi').value.trim(),
          pj: document.getElementById('proker-pj').value.trim(),
          createdAt: firebase.firestore.FieldValue.serverTimestamp(),
          updatedAt: firebase.firestore.FieldValue.serverTimestamp()
        };

        if (!data.nama || !data.mulai || !data.pj) {
          showAlert('error', 'Nama program, tanggal mulai, dan penanggung jawab harus diisi!');
          return;
        }

        try {
          if (id) {
            await db.collection("proker").doc(id).update(data);
            showAlert('success', 'Berhasil update program kerja!');
          } else {
            await db.collection("proker").add(data);
            showAlert('success', 'Berhasil menambah program kerja baru!');
          }
          
          clearProkerForm();
          loadAllData();
          
        } catch (error) {
          console.error("Error saving proker:", error);
          showAlert('error', 'Gagal menyimpan: ' + error.message);
        }
      }

      function renderProker() {
        const container = document.getElementById('daftar-proker');
        if (!container) return;
        
        if (osimData.proker.length === 0) {
          container.innerHTML = `
            <div style="text-align: center; padding: 40px; opacity: 0.7;">
              <i class="fas fa-tasks" style="font-size: 48px; margin-bottom: 20px;"></i>
              <p>Belum ada program kerja</p>
              <p style="font-size: 0.9rem;">Klik "Tambah Program Kerja" untuk membuat program pertama</p>
            </div>
          `;
          return;
        }
        
        container.innerHTML = osimData.proker.map(p => `
          <div class="proker-card">
            <div class="proker-header">
              <span class="status-badge status-${p.status}">${p.status}</span>
              <span style="font-size: 0.9rem; opacity: 0.7;">${p.divisi}</span>
            </div>
            <h3 class="proker-title">${p.nama}</h3>
            <p class="proker-desc">${p.deskripsi}</p>
            <div class="proker-progress">
              <div class="proker-progress-bar" style="width: ${p.progress || 0}%"></div>
            </div>
            <div style="display: flex; justify-content: space-between; margin-top: 15px;">
              <span><i class="fas fa-user"></i> ${p.pj}</span>
              <span><i class="fas fa-calendar"></i> ${formatDate(p.mulai)} - ${formatDate(p.selesai)}</span>
            </div>
            <div style="margin-top: 20px; display: flex; gap: 10px; justify-content: flex-end;">
              <button class="btn btn-outline edit-proker-btn" data-id="${p.id}">
                <i class="fas fa-edit"></i> Edit
              </button>
              <button class="btn btn-danger delete-proker-btn" data-id="${p.id}">
                <i class="fas fa-trash"></i> Hapus
              </button>
            </div>
          </div>
        `).join('');
        
        attachProkerListeners();
      }

      // ==================== KEGIATAN FUNCTIONS ====================
      async function saveKegiatan() {
        const id = document.getElementById('edit-kegiatan-id').value;
        const data = {
          nama: document.getElementById('kegiatan-nama').value.trim(),
          tanggal: document.getElementById('kegiatan-tanggal').value,
          waktu: document.getElementById('kegiatan-waktu').value,
          tempat: document.getElementById('kegiatan-tempat').value.trim(),
          jenis: document.getElementById('kegiatan-jenis').value,
          deskripsi: document.getElementById('kegiatan-deskripsi').value.trim(),
          peserta: document.getElementById('kegiatan-peserta').value.trim(),
          createdAt: firebase.firestore.FieldValue.serverTimestamp(),
          updatedAt: firebase.firestore.FieldValue.serverTimestamp()
        };

        if (!data.nama || !data.tanggal || !data.tempat) {
          showAlert('error', 'Nama kegiatan, tanggal, dan tempat harus diisi!');
          return;
        }

        try {
          if (id) {
            await db.collection("kegiatan").doc(id).update(data);
            showAlert('success', 'Berhasil update kegiatan!');
          } else {
            await db.collection("kegiatan").add(data);
            showAlert('success', 'Berhasil menambah kegiatan baru!');
          }
          
          clearKegiatanForm();
          loadAllData();
          
        } catch (error) {
          console.error("Error saving kegiatan:", error);
          showAlert('error', 'Gagal menyimpan: ' + error.message);
        }
      }

      function renderKegiatan() {
        const container = document.getElementById('calendar-view');
        if (!container) return;
        
        if (osimData.kegiatan.length === 0) {
          container.innerHTML = `
            <div style="text-align: center; padding: 40px; opacity: 0.7;">
              <i class="fas fa-calendar" style="font-size: 48px; margin-bottom: 20px;"></i>
              <p>Belum ada kegiatan</p>
              <p style="font-size: 0.9rem;">Klik "Tambah Kegiatan" untuk membuat kegiatan pertama</p>
            </div>
          `;
          return;
        }
        
        // Sort kegiatan by date
        const sortedKegiatan = [...osimData.kegiatan].sort((a, b) => 
          new Date(a.tanggal) - new Date(b.tanggal)
        );
        
        container.innerHTML = sortedKegiatan.map(k => `
          <div class="kegiatan-card">
            <div class="kegiatan-date">${formatDate(k.tanggal)} ${k.waktu || ''} - ${k.tempat}</div>
            <h3 class="kegiatan-title">${k.nama}</h3>
            <p>${k.deskripsi}</p>
            <div style="margin-top: 10px; display: flex; justify-content: space-between; align-items: center;">
              <span><i class="fas fa-users"></i> ${k.peserta || 'Semua pengurus'}</span>
              <span class="status-badge" style="background: ${getBadgeColor(k.jenis)}">${k.jenis}</span>
            </div>
            <div style="margin-top: 15px; display: flex; gap: 10px; justify-content: flex-end;">
              <button class="btn btn-outline edit-kegiatan-btn" data-id="${k.id}">
                <i class="fas fa-edit"></i> Edit
              </button>
              <button class="btn btn-danger delete-kegiatan-btn" data-id="${k.id}">
                <i class="fas fa-trash"></i> Hapus
              </button>
            </div>
          </div>
        `).join('');
        
        attachKegiatanListeners();
      }

      // ==================== GALERI FUNCTIONS ====================
      async function saveGaleri() {
        const fileInput = document.getElementById('galeri-file');
        const file = fileInput.files[0];
        
        if (!file) {
          showAlert('error', 'Pilih foto terlebih dahulu!');
          return;
        }

        const data = {
          judul: document.getElementById('galeri-judul').value.trim(),
          album: document.getElementById('galeri-album').value,
          tanggal: document.getElementById('galeri-tanggal').value,
          deskripsi: document.getElementById('galeri-deskripsi').value.trim(),
          fileName: file.name,
          fileType: file.type,
          fileSize: file.size,
          createdAt: firebase.firestore.FieldValue.serverTimestamp()
        };

        if (!data.judul || !data.tanggal) {
          showAlert('error', 'Judul dan tanggal harus diisi!');
          return;
        }

        try {
          // Simpan metadata ke Firestore
          const docRef = await db.collection("galeri").add(data);
          showAlert('success', 'Berhasil menambah foto!');
          
          // Reset form
          clearGaleriForm();
          loadAllData();
          
        } catch (error) {
          console.error("Error saving galeri:", error);
          showAlert('error', 'Gagal menyimpan: ' + error.message);
        }
      }

      function renderGaleri() {
        const container = document.getElementById('daftar-galeri');
        if (!container) return;
        
        if (osimData.galeri.length === 0) {
          container.innerHTML = `
            <div style="text-align: center; padding: 40px; opacity: 0.7;">
              <i class="fas fa-images" style="font-size: 48px; margin-bottom: 20px;"></i>
              <p>Belum ada foto di galeri</p>
              <p style="font-size: 0.9rem;">Klik "Tambah Foto" untuk menambah foto pertama</p>
            </div>
          `;
          return;
        }
        
        container.innerHTML = `
          <div class="gallery-grid">
            ${osimData.galeri.map(g => `
              <div class="gallery-item">
                <div class="gallery-img" style="background: linear-gradient(45deg, #667eea 0%, #764ba2 100%);"></div>
                <div class="gallery-overlay">
                  <h4 style="margin-bottom: 5px;">${g.judul}</h4>
                  <p style="font-size: 0.9rem; opacity: 0.9;">${g.album}  ${formatDate(g.tanggal)}</p>
                  <div style="margin-top: 10px; display: flex; gap: 10px;">
                    <button class="btn btn-outline" style="padding: 5px 10px; font-size: 0.8rem;">
                      <i class="fas fa-eye"></i> Lihat
                    </button>
                    <button class="btn btn-danger delete-galeri-btn" data-id="${g.id}" style="padding: 5px 10px; font-size: 0.8rem;">
                      <i class="fas fa-trash"></i>
                    </button>
                  </div>
                </div>
              </div>
            `).join('')}
          </div>
        `;
      }

      // ==================== PROFIL FUNCTIONS ====================
      async function saveProfil() {
        const id = document.getElementById('edit-profil-id').value;
        const data = {
          nama: document.getElementById('profil-nama').value.trim(),
          jabatan: document.getElementById('profil-jabatan').value,
          kelas: document.getElementById('profil-kelas').value.trim(),
          divisi: document.getElementById('profil-divisi').value,
          email: document.getElementById('profil-email').value.trim(),
          whatsapp: document.getElementById('profil-whatsapp').value.trim(),
          createdAt: firebase.firestore.FieldValue.serverTimestamp(),
          updatedAt: firebase.firestore.FieldValue.serverTimestamp()
        };

        if (!data.nama || !data.jabatan || !data.kelas) {
          showAlert('error', 'Nama, jabatan, dan kelas harus diisi!');
          return;
        }

        try {
          if (id) {
            await db.collection("profil").doc(id).update(data);
            showAlert('success', 'Berhasil update profil!');
          } else {
            await db.collection("profil").add(data);
            showAlert('success', 'Berhasil menambah profil baru!');
          }
          
          clearProfilForm();
          loadAllData();
          
        } catch (error) {
          console.error("Error saving profil:", error);
          showAlert('error', 'Gagal menyimpan: ' + error.message);
        }
      }

      function renderProfil() {
        const container = document.getElementById('daftar-profil');
        if (!container) return;
        
        if (osimData.profil.length === 0) {
          container.innerHTML = `
            <div style="text-align: center; padding: 40px; opacity: 0.7;">
              <i class="fas fa-users" style="font-size: 48px; margin-bottom: 20px;"></i>
              <p>Belum ada data pengurus</p>
              <p style="font-size: 0.9rem;">Klik "Tambah Pengurus" untuk menambah data pertama</p>
            </div>
          `;
          return;
        }
        
        container.innerHTML = `
          <div class="profil-grid">
            ${osimData.profil.map(p => `
              <div class="profil-card">
                <div class="profil-avatar">
                  <i class="fas fa-user"></i>
                </div>
                <h3 class="profil-name">${p.nama}</h3>
                <p class="profil-jabatan">${p.jabatan}</p>
                <p style="margin-bottom: 10px;">${p.divisi}</p>
                <p style="font-size: 0.9rem; opacity: 0.7;">${p.kelas}</p>
                ${p.email ? `<p style="font-size: 0.85rem; margin-top: 10px;"><i class="fas fa-envelope"></i> ${p.email}</p>` : ''}
                ${p.whatsapp ? `<p style="font-size: 0.85rem;"><i class="fas fa-phone"></i> ${p.whatsapp}</p>` : ''}
                <div style="margin-top: 20px; display: flex; gap: 10px; justify-content: center;">
                  <button class="btn btn-outline edit-profil-btn" data-id="${p.id}" style="padding: 5px 15px;">
                    <i class="fas fa-edit"></i>
                  </button>
                  <button class="btn btn-danger delete-profil-btn" data-id="${p.id}" style="padding: 5px 15px;">
                    <i class="fas fa-trash"></i>
                  </button>
                </div>
              </div>
            `).join('')}
          </div>
        `;
        
        attachProfilListeners();
      }

      // ==================== SETTINGS FUNCTIONS ====================
      async function loadSettings() {
        try {
          const settingsDoc = await db.collection("settings").doc("app").get();
          if (settingsDoc.exists) {
            const settings = settingsDoc.data();
            document.getElementById('setting-nama').value = settings.nama || '';
            document.getElementById('setting-tahun').value = settings.tahun || '';
            document.getElementById('setting-logo').value = settings.logo || '';
            document.getElementById('setting-warna').value = settings.warna || '#1E40AF';
            document.getElementById('setting-deskripsi').value = settings.deskripsi || '';
          }
        } catch (error) {
          console.error("Error loading settings:", error);
        }
      }

      async function saveSettings() {
        const settings = {
          nama: document.getElementById('setting-nama').value.trim(),
          tahun: document.getElementById('setting-tahun').value.trim(),
          logo: document.getElementById('setting-logo').value.trim(),
          warna: document.getElementById('setting-warna').value,
          deskripsi: document.getElementById('setting-deskripsi').value.trim(),
          updatedAt: firebase.firestore.FieldValue.serverTimestamp()
        };

        try {
          await db.collection("settings").doc("app").set(settings, { merge: true });
          showAlert('success', 'Pengaturan berhasil disimpan!');
          
          // Update tema warna
          document.documentElement.style.setProperty('--accent-color', settings.warna);
          
        } catch (error) {
          console.error("Error saving settings:", error);
          showAlert('error', 'Gagal menyimpan pengaturan: ' + error.message);
        }
      }

      // ==================== HELPER FUNCTIONS ====================
      function getBadgeColor(jenis) {
        const colors = { 
          'Penting': '#DC2626', 
          'Info': '#059669', 
          'Darurat': '#F59E0B', 
          'Acara': '#7C3AED',
          'Lomba': '#EC4899',
          'Pengumuman': '#1E40AF',
          'Rapat': '#3B82F6',
          'Latihan': '#10B981',
          'Pelatihan': '#8B5CF6'
        };
        return colors[jenis] || '#1E40AF';
      }

      function formatDate(dateString) {
        if (!dateString) return '-';
        try {
          let date;
          if (dateString.toDate) {
            date = dateString.toDate();
          } else {
            date = new Date(dateString);
          }
          
          if (isNaN(date.getTime())) {
            return 'Tanggal tidak valid';
          }
          
          return date.toLocaleDateString('id-ID', {
            weekday: 'long',
            year: 'numeric',
            month: 'long',
            day: 'numeric'
          });
        } catch (e) {
          return dateString;
        }
      }

      function showAlert(type, msg) {
        const alert = document.getElementById('admin-alert');
        if (!alert) return;
        
        alert.textContent = msg;
        alert.className = `alert alert-${type}`;
        alert.style.display = 'block';
        setTimeout(() => {
          alert.style.display = 'none';
        }, 5000);
      }

      // ==================== FORM CLEAR FUNCTIONS ====================
      function clearPengumumanForm() {
        document.getElementById('edit-pengumuman-id').value = '';
        document.getElementById('pengumuman-judul').value = '';
        document.getElementById('pengumuman-jenis').value = 'Penting';
        document.getElementById('pengumuman-tanggal').value = new Date().toISOString().split('T')[0];
        document.getElementById('pengumuman-isi').value = '';
        document.getElementById('pengumuman-status').value = 'published';
        document.getElementById('pengumuman-lampiran').value = '';
        document.getElementById('cancel-edit').style.display = 'none';
        document.getElementById('char-count').textContent = '0 karakter';
      }

      function clearProkerForm() {
        document.getElementById('edit-proker-id').value = '';
        document.getElementById('proker-nama').value = '';
        document.getElementById('proker-divisi').value = 'Acara';
        document.getElementById('proker-mulai').value = new Date().toISOString().split('T')[0];
        document.getElementById('proker-selesai').value = new Date().toISOString().split('T')[0];
        document.getElementById('proker-status').value = 'ongoing';
        document.getElementById('proker-progress').value = '0';
        document.getElementById('progress-value').textContent = '0%';
        document.getElementById('proker-deskripsi').value = '';
        document.getElementById('proker-pj').value = '';
      }

      function clearKegiatanForm() {
        document.getElementById('edit-kegiatan-id').value = '';
        document.getElementById('kegiatan-nama').value = '';
        document.getElementById('kegiatan-tanggal').value = new Date().toISOString().split('T')[0];
        document.getElementById('kegiatan-waktu').value = '15:00';
        document.getElementById('kegiatan-tempat').value = '';
        document.getElementById('kegiatan-jenis').value = 'Rapat';
        document.getElementById('kegiatan-deskripsi').value = '';
        document.getElementById('kegiatan-peserta').value = '';
      }

      function clearGaleriForm() {
        document.getElementById('galeri-judul').value = '';
        document.getElementById('galeri-album').value = 'Kegiatan';
        document.getElementById('galeri-tanggal').value = new Date().toISOString().split('T')[0];
        document.getElementById('galeri-deskripsi').value = '';
        document.getElementById('galeri-file').value = '';
        document.getElementById('preview-container').style.display = 'none';
        document.getElementById('image-preview').src = '#';
      }

      function clearProfilForm() {
        document.getElementById('edit-profil-id').value = '';
        document.getElementById('profil-nama').value = '';
        document.getElementById('profil-jabatan').value = 'Anggota';
        document.getElementById('profil-kelas').value = '';
        document.getElementById('profil-divisi').value = 'Acara';
        document.getElementById('profil-email').value = '';
        document.getElementById('profil-whatsapp').value = '';
        document.getElementById('profil-file').value = '';
        document.getElementById('profil-preview').style.display = 'none';
        document.getElementById('profil-image-preview').src = '#';
      }

      // ==================== CREATE DUMMY DATA ====================
      async function createAllDummyData() {
        if (!confirm('Buat data contoh untuk semua fitur?')) return;
        
        const dummyData = {
          pengumuman: [
            {
              judul: "Pembukaan Pendaftaran OSIM 2024",
              jenis: "Penting",
              tanggal: "2024-01-15",
              isi: "Pendaftaran untuk menjadi anggota OSIM tahun ajaran 2024-2025 telah dibuka. Daftarkan diri Anda segera melalui link yang tersedia.",
              status: "published",
              lampiran: "form-pendaftaran.pdf"
            },
            {
              judul: "Pengumuman Hasil Seleksi OSIM",
              jenis: "Info",
              tanggal: "2024-01-25",
              isi: "Hasil seleksi calon anggota OSIM telah diumumkan. Silakan cek nama Anda di papan pengumuman sekolah.",
              status: "published",
              lampiran: ""
            }
          ],
          proker: [
            {
              nama: "Pekan Olahraga Antar Kelas",
              divisi: "Olahraga",
              mulai: "2024-02-01",
              selesai: "2024-02-28",
              status: "ongoing",
              progress: 60,
              deskripsi: "Menyelenggarakan kompetisi olahraga antar kelas untuk meningkatkan sportivitas",
              pj: "Budi Santoso"
            },
            {
              nama: "Pelatihan Kepemimpinan",
              divisi: "Acara",
              mulai: "2024-03-01",
              selesai: "2024-03-03",
              status: "planned",
              progress: 0,
              deskripsi: "Pelatihan kepemimpinan untuk pengurus OSIM",
              pj: "Siti Aisyah"
            }
          ],
          kegiatan: [
            {
              nama: "Rapat Koordinasi Bulanan",
              tanggal: "2024-02-05",
              waktu: "15:00",
              tempat: "Ruang OSIM",
              jenis: "Rapat",
              deskripsi: "Rapat koordinasi bulanan pengurus OSIM",
              peserta: "Semua pengurus"
            },
            {
              nama: "Latihan Paskibra",
              tanggal: "2024-02-07",
              waktu: "16:00",
              tempat: "Lapangan Sekolah",
              jenis: "Latihan",
              deskripsi: "Latihan rutin Paskibra",
              peserta: "Anggota Paskibra"
            }
          ],
          profil: [
            {
              nama: "Ahmad Rizki",
              jabatan: "Ketua",
              kelas: "XI IPA 2",
              divisi: "Acara",
              email: "ahmad@email.com",
              whatsapp: "081234567890"
            },
            {
              nama: "Siti Nurhaliza",
              jabatan: "Sekretaris",
              kelas: "XI IPS 1",
              divisi: "Sekretariat",
              email: "siti@email.com",
              whatsapp: "081298765432"
            }
          ]
        };
        
        try {
          showAlert('success', 'Membuat data contoh...');
          
          // Add data to each collection
          for (const [collection, data] of Object.entries(dummyData)) {
            const addPromises = data.map(item => {
              item.createdAt = firebase.firestore.FieldValue.serverTimestamp();
              item.updatedAt = firebase.firestore.FieldValue.serverTimestamp();
              return db.collection(collection).add(item);
            });
            
            await Promise.all(addPromises);
          }
          
          showAlert('success', 'Data contoh berhasil dibuat!');
          loadAllData();
          
        } catch (error) {
          console.error("Error creating dummy data:", error);
          showAlert('error', 'Gagal membuat data contoh: ' + error.message);
        }
      }

      // ==================== EVENT LISTENERS SETUP ====================
      function attachListeners() {
        // Login
        document.getElementById('login-btn').onclick = handleLogin;
        
        // Enter key untuk login
        document.getElementById('username').addEventListener('keypress', (e) => {
          if (e.key === 'Enter') handleLogin();
        });
        document.getElementById('password').addEventListener('keypress', (e) => {
          if (e.key === 'Enter') handleLogin();
        });
        
        // Quick actions
        document.getElementById('quick-add-pengumuman').onclick = () => {
          document.querySelector('[data-section="pengumuman"]').click();
        };
        document.getElementById('quick-add-proker').onclick = () => {
          document.querySelector('[data-section="proker"]').click();
        };
        document.getElementById('quick-add-kegiatan').onclick = () => {
          document.querySelector('[data-section="kegiatan"]').click();
        };
        document.getElementById('create-all-dummy').onclick = createAllDummyData;
        
        // Save buttons
        document.getElementById('simpan-pengumuman').onclick = savePengumuman;
        document.getElementById('simpan-proker').onclick = saveProker;
        document.getElementById('simpan-kegiatan').onclick = saveKegiatan;
        document.getElementById('simpan-galeri').onclick = saveGaleri;
        document.getElementById('simpan-profil').onclick = saveProfil;
        document.getElementById('save-settings').onclick = saveSettings;
        
        // Reset buttons
        document.getElementById('reset-pengumuman').onclick = clearPengumumanForm;
        document.getElementById('reset-proker').onclick = clearProkerForm;
        document.getElementById('reset-kegiatan').onclick = clearKegiatanForm;
        document.getElementById('reset-galeri').onclick = clearGaleriForm;
        document.getElementById('reset-profil').onclick = clearProfilForm;
        
        // Cancel edit
        document.getElementById('cancel-edit').onclick = clearPengumumanForm;
        
        // Logout
        document.getElementById('logout-btn').onclick = function(e) {
          e.preventDefault();
          if (confirm('Yakin ingin logout?')) {
            localStorage.clear();
            location.reload();
          }
        };
        
        // Tabs
        document.querySelectorAll('.tab').forEach(tab => {
          tab.onclick = function() {
            const tabId = this.dataset.tab;
            const parent = this.closest('.admin-section');
            
            // Update active tab
            parent.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            this.classList.add('active');
            
            // Show active content
            parent.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            parent.querySelector(`#${tabId}`).classList.add('active');
          };
        });
        
        // Progress slider
        document.getElementById('proker-progress').addEventListener('input', function() {
          document.getElementById('progress-value').textContent = this.value + '%';
        });
        
        // Image preview for galeri
        document.getElementById('galeri-file').addEventListener('change', function(e) {
          if (this.files && this.files[0]) {
            const reader = new FileReader();
            reader.onload = function(e) {
              document.getElementById('image-preview').src = e.target.result;
              document.getElementById('preview-container').style.display = 'block';
            };
            reader.readAsDataURL(this.files[0]);
          }
        });
        
        // Upload area clicks
        document.getElementById('galeri-upload-area').onclick = () => document.getElementById('galeri-file').click();
        document.getElementById('profil-upload-area').onclick = () => document.getElementById('profil-file').click();
        
        // Sidebar navigation
        document.querySelectorAll('.menu-item').forEach(item => {
          item.onclick = function(e) {
            const section = this.dataset.section;
            
            // Update active menu
            document.querySelectorAll('.menu-item').forEach(m => m.classList.remove('active'));
            this.classList.add('active');
            
            // Update page title
            const titles = {
              'dashboard': 'Dashboard',
              'pengumuman': 'Pengumuman',
              'proker': 'Program Kerja',
              'kegiatan': 'Kegiatan',
              'galeri': 'Galeri',
              'profil': 'Profil Pengurus',
              'settings': 'Pengaturan'
            };
            document.getElementById('page-title').textContent = titles[section] || section;
            
            // Show selected section
            document.querySelectorAll('.admin-section').forEach(s => s.style.display = 'none');
            document.getElementById(`${section}-section`).style.display = 'block';
            
            // Render section data if needed
            if (section !== 'dashboard' && section !== 'settings') {
              renderSection(section);
            }
          };
        });
        
        // Character count
        document.getElementById('pengumuman-isi').addEventListener('input', function() {
          document.getElementById('char-count').textContent = this.value.length + ' karakter';
        });
      }

      // Attach dynamic listeners after rendering
      function attachPengumumanListeners() {
        document.querySelectorAll('.edit-pengumuman-btn').forEach(btn => {
          btn.onclick = async (e) => {
            const id = e.currentTarget.dataset.id;
            const pengumuman = osimData.pengumuman.find(p => p.id === id);
            if (!pengumuman) return;
            
            // Switch to form tab
            document.querySelector('[data-tab="form-pengumuman"]').click();
            
            // Fill form
            document.getElementById('edit-pengumuman-id').value = id;
            document.getElementById('pengumuman-judul').value = pengumuman.judul || '';
            document.getElementById('pengumuman-jenis').value = pengumuman.jenis || 'Penting';
            document.getElementById('pengumuman-tanggal').value = pengumuman.tanggal || '';
            document.getElementById('pengumuman-isi').value = pengumuman.isi || '';
            document.getElementById('pengumuman-status').value = pengumuman.status || 'published';
            document.getElementById('pengumuman-lampiran').value = pengumuman.lampiran || '';
            document.getElementById('cancel-edit').style.display = 'inline-flex';
            document.getElementById('char-count').textContent = (pengumuman.isi?.length || 0) + ' karakter';
          };
        });
        
        document.querySelectorAll('.delete-pengumuman-btn').forEach(btn => {
          btn.onclick = async (e) => {
            const id = e.currentTarget.dataset.id;
            if (confirm('Hapus pengumuman ini?')) {
              try {
                await db.collection("pengumuman").doc(id).delete();
                showAlert('success', 'Pengumuman berhasil dihapus');
                loadAllData();
              } catch (error) {
                showAlert('error', 'Gagal menghapus: ' + error.message);
              }
            }
          };
        });
      }

      // Similar functions for other sections...
      function attachProkerListeners() {
        // ... implement similar to attachPengumumanListeners
      }

      function attachKegiatanListeners() {
        // ... implement similar to attachPengumumanListeners
      }

      function attachProfilListeners() {
        // ... implement similar to attachPengumumanListeners
      }

      // Initial setup
      attachListeners();
      
      // Check if logged in
      const isLoggedIn = localStorage.getItem('osim_admin_logged_in') === 'true';
      if (isLoggedIn) {
        showDashboardUI();
      } else {
        document.getElementById('username').focus();
      }
    });

  </script>

  <!-- LOAD FIREBASE SDK -->
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>

 
</body></html>
 
